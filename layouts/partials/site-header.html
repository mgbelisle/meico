{{ $featured_image := .Param "featured_image" }}
{{ $header := cond (isset .Params "header") .Params.header (.Title | default .Site.Title) }}
{{ if $featured_image }}
  <img src="{{ $featured_image }}" id="featured-image-img" style="display: none;" />
  <header class="cover bg-top" id="featured-image-header">
    <div class="bg-black-60">
      {{ partial "site-navigation.html" .}}
      <div class="tc pv4 pv6-l ph3 ph4-ns">
        {{ with $header }}
        <h1 class="f2 f-subheadline-l fw2 white-90 mb0 lh-title">
	  {{ . }}
        </h1>
	{{ end }}
        {{ with .Param "description" }}
          <h2 class="fw1 f5 f3-l white-80 measure-wide-l center mt3">
            {{ . }}
          </h2>
        {{ end }}
      </div>
    </div>
  </header>
  <script>
    {{/* Ugly hack because of relative urls */}}
    document.getElementById('featured-image-header').setAttribute('style', 'background-image: url(' + document.getElementById('featured-image-img').getAttribute('src') + '); background-position: right bottom;');
  </script>
{{ else }}
  <header>
    <div class="pb3-m pb6-l {{ .Site.Params.background_color_class | default "bg-black" }}">
      {{ partial "site-navigation.html" . }}
      <div class="tc-l pv3 ph3 ph4-ns">
        {{ with $header }}
        <h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
	  {{ . }}
        </h1>
	{{ end }}
        {{ with .Params.description }}
          <h2 class="fw1 f5 f3-l white-80 measure-wide-l center lh-copy mt3 mb4">
            {{ . }}
          </h2>
        {{ end }}
      </div>
    </div>
  </header>
{{ end }}
